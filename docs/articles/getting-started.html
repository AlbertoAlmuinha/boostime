<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started with Boostime • boostime</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with Boostime">
<meta property="og:description" content="boostime">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">boostime</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-started.html">Getting Started with Boostime</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/AlbertoAlmuinha/boostime/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getting-started_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started with Boostime</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/AlbertoAlmuinha/boostime/blob/master/vignettes/getting-started.Rmd"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="hidden name"><code>getting-started.Rmd</code></div>

    </div>

    
    
<p>In this short tutorial, we are going to see how to use <code>boostime</code> to apply two models: an arima + catboost and a prophet + lightGBM.</p>
<p>First, we load the libraries that we are going to use during this tutorial.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AlbertoAlmuinha/boostime">boostime</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/modeltime">modeltime</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/business-science/timetk">timetk</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>
<span class="co"># This toggles plots from plotly (interactive) to ggplot (static)</span>
<span class="va">interactive</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></code></pre></div>
<p>Next, we visualize the data that we are going to use once filtered:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m750</span> <span class="op">&lt;-</span> <span class="va">m4_monthly</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="st">"M750"</span><span class="op">)</span>

<span class="va">m750</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/timetk/man/plot_time_series.html">plot_time_series</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">value</span>, .interactive <span class="op">=</span> <span class="va">interactive</span><span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-3-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>Let’s split the data into training and test sets using <code><a href="https://rsample.tidymodels.org/reference/initial_split.html">initial_time_split()</a></code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">splits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">initial_time_split</a></span><span class="op">(</span><span class="va">m750</span>, prop <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></code></pre></div>
<div id="model-generation" class="section level2">
<h2 class="hasAnchor">
<a href="#model-generation" class="anchor"></a>Model Generation</h2>
<div id="auto-arima-catboost" class="section level3">
<h3 class="hasAnchor">
<a href="#auto-arima-catboost" class="anchor"></a>Auto Arima + Catboost</h3>
<p>In the first model, we will use an Arima model whose orders will be selected automatically through KPSS unit root tests. Subsequently, the residuals of this first model will be passed to a Catboost model. Finally, the output of both models is summed.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_arima_catboost</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/boost_arima.html">boost_arima</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
                        <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"auto_arima_catboost"</span>, verbose <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span>
                        <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html">fit</a></span><span class="op">(</span><span class="va">value</span> <span class="op">~</span> <span class="va">date</span> <span class="op">+</span> <span class="fu"><a href="http://lubridate.tidyverse.org/reference/month.html">month</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span>, data <span class="op">=</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">training</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span><span class="op">)</span>

<span class="va">model_arima_catboost</span>
<span class="co">#&gt; parsnip model object</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Fit time:  26.1s </span>
<span class="co">#&gt; ARIMA(1,0,1)(1,1,1)[12] with drift w/ Catboost Errors</span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Model 1: Auto ARIMA</span>
<span class="co">#&gt; Series: outcome </span>
<span class="co">#&gt; ARIMA(1,0,1)(1,1,1)[12] with drift </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;          ar1      ma1   sar1     sma1    drift</span>
<span class="co">#&gt;       0.9600  -0.3275  0.195  -0.7330  17.4466</span>
<span class="co">#&gt; s.e.  0.0203   0.0706  0.121   0.1025   4.8051</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; sigma^2 estimated as 23896:  log likelihood=-1499.59</span>
<span class="co">#&gt; AIC=3011.18   AICc=3011.56   BIC=3031.87</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Model 2: Catboost Errors</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; CatBoost model (1000 trees)</span>
<span class="co">#&gt; Loss function: RMSE</span>
<span class="co">#&gt; Fit to 1 features</span></code></pre></div>
</div>
<div id="prophet-catboost" class="section level3">
<h3 class="hasAnchor">
<a href="#prophet-catboost" class="anchor"></a>Prophet + Catboost</h3>
<p>The second model will use Prophet followed by Catboost to model the residuals:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_prophet_catboost</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/boost_prophet.html">boost_prophet</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
                          <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"prophet_catboost"</span>, verbose <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span>
                          <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html">fit</a></span><span class="op">(</span><span class="va">value</span> <span class="op">~</span> <span class="va">date</span> <span class="op">+</span> <span class="fu"><a href="http://lubridate.tidyverse.org/reference/month.html">month</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span>, data <span class="op">=</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">training</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="modeltime-integration" class="section level2">
<h2 class="hasAnchor">
<a href="#modeltime-integration" class="anchor"></a>Modeltime Integration</h2>
<p>Here’s the general process and where the functions fit.</p>
<div class="figure" style="text-align: center">
<img src="modeltime_workflow.jpg" alt="The Modeltime Workflow" width="100%"><p class="caption">
The Modeltime Workflow
</p>
</div>
<p>So we will continue from step three.</p>
<div id="step-3---add-fitted-models-to-a-model-table-" class="section level3">
<h3 class="hasAnchor">
<a href="#step-3---add-fitted-models-to-a-model-table-" class="anchor"></a>Step 3 - Add fitted models to a Model Table.</h3>
<p>The next step is to add each of the models to a Modeltime Table using <code><a href="https://rdrr.io/pkg/modeltime/man/modeltime_table.html">modeltime_table()</a></code>. This step does some basic checking to make sure each of the models are fitted and that organizes into a scalable structure called a <strong><em>“Modeltime Table”</em></strong> that is used as part of our <em>forecasting workflow.</em></p>
<p>We have 2 models to add.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">models_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/modeltime_table.html">modeltime_table</a></span><span class="op">(</span>
    <span class="va">model_arima_catboost</span>,
    <span class="va">model_prophet_catboost</span>
<span class="op">)</span>
<span class="va">models_tbl</span>
<span class="co">#&gt; # Modeltime Table</span>
<span class="co">#&gt; # A tibble: 2 x 3</span>
<span class="co">#&gt;   .model_id .model   .model_desc                                          </span>
<span class="co">#&gt;       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;                                                </span>
<span class="co">#&gt; 1         1 &lt;fit[+]&gt; ARIMA(1,0,1)(1,1,1)[12] WITH DRIFT W/ CATBOOST ERRORS</span>
<span class="co">#&gt; 2         2 &lt;fit[+]&gt; PROPHET MODEL W/ CATBOOST ERROR SPECIFICATION</span></code></pre></div>
</div>
<div id="step-4---calibrate-the-model-to-a-testing-set-" class="section level3">
<h3 class="hasAnchor">
<a href="#step-4---calibrate-the-model-to-a-testing-set-" class="anchor"></a>Step 4 - Calibrate the model to a testing set.</h3>
<p>Calibrating adds a new column, <code>.calibration_data</code>, with the test predictions and residuals inside. A few notes on Calibration:</p>
<ul>
<li>Calibration is how confidence intervals and accuracy metrics are determined</li>
<li>
<strong><em>Calibration Data</em></strong> is simply forecasting predictions and residuals that are calculated from out-of-sample data.</li>
<li>After calibrating, the calibration data follows the data through the forecasting workflow.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">calibration_tbl</span> <span class="op">&lt;-</span> <span class="va">models_tbl</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/modeltime_calibrate.html">modeltime_calibrate</a></span><span class="op">(</span>new_data <span class="op">=</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">testing</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span><span class="op">)</span>
<span class="va">calibration_tbl</span>
<span class="co">#&gt; # Modeltime Table</span>
<span class="co">#&gt; # A tibble: 2 x 5</span>
<span class="co">#&gt;   .model_id .model   .model_desc                          .type .calibration_da~</span>
<span class="co">#&gt;       &lt;int&gt; &lt;list&gt;   &lt;chr&gt;                                &lt;chr&gt; &lt;list&gt;          </span>
<span class="co">#&gt; 1         1 &lt;fit[+]&gt; ARIMA(1,0,1)(1,1,1)[12] WITH DRIFT ~ Test  &lt;tibble [62 x 4~</span>
<span class="co">#&gt; 2         2 &lt;fit[+]&gt; PROPHET MODEL W/ CATBOOST ERROR SPE~ Test  &lt;tibble [62 x 4~</span></code></pre></div>
</div>
<div id="step-5---testing-set-forecast-accuracy-evaluation" class="section level3">
<h3 class="hasAnchor">
<a href="#step-5---testing-set-forecast-accuracy-evaluation" class="anchor"></a>Step 5 - Testing Set Forecast &amp; Accuracy Evaluation</h3>
<p>There are 2 critical parts to an evaluation.</p>
<ul>
<li>Visualizing the Forecast vs Test Data Set</li>
<li>Evaluating the Test (Out of Sample) Accuracy</li>
</ul>
<div id="a---visualizing-the-forecast-test" class="section level4">
<h4 class="hasAnchor">
<a href="#a---visualizing-the-forecast-test" class="anchor"></a>5A - Visualizing the Forecast Test</h4>
<p>Visualizing the Test Error is easy to do using the <strong>interactive plotly visualization (just toggle the visibility of the models using the Legend).</strong></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">calibration_tbl</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/modeltime_forecast.html">modeltime_forecast</a></span><span class="op">(</span>
        new_data    <span class="op">=</span> <span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html">testing</a></span><span class="op">(</span><span class="va">splits</span><span class="op">)</span>,
        actual_data <span class="op">=</span> <span class="va">m750</span>
    <span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/plot_modeltime_forecast.html">plot_modeltime_forecast</a></span><span class="op">(</span>
      .legend_max_width <span class="op">=</span> <span class="fl">25</span>, <span class="co"># For mobile screens</span>
      .interactive      <span class="op">=</span> <span class="va">interactive</span>
    <span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div id="b---accuracy-metrics" class="section level4">
<h4 class="hasAnchor">
<a href="#b---accuracy-metrics" class="anchor"></a>5B - Accuracy Metrics</h4>
<p>We can use <code><a href="https://rdrr.io/pkg/modeltime/man/modeltime_accuracy.html">modeltime_accuracy()</a></code> to collect common accuracy metrics. The default reports the following metrics using <code>yardstick</code> functions:</p>
<ul>
<li>
<strong>MAE</strong> - Mean absolute error, <code>mae()</code>
</li>
<li>
<strong>MAPE</strong> - Mean absolute percentage error, <code>mape()</code>
</li>
<li>
<strong>MASE</strong> - Mean absolute scaled error, <code>mase()</code>
</li>
<li>
<strong>SMAPE</strong> - Symmetric mean absolute percentage error, <code>smape()</code>
</li>
<li>
<strong>RMSE</strong> - Root mean squared error, <code>rmse()</code>
</li>
<li>
<strong>RSQ</strong> - R-squared, <code>rsq()</code>
</li>
</ul>
<p>These of course can be customized following the rules for creating new yardstick metrics, but the defaults are very useful. Refer to <code>default_forecast_accuracy_metrics()</code> to learn more.</p>
<p>To make table-creation a bit easier, I’ve included <code><a href="https://rdrr.io/pkg/modeltime/man/table_modeltime_accuracy.html">table_modeltime_accuracy()</a></code> for outputing results in either interactive (<code>reactable</code>) or static (<code>gt</code>) tables.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">calibration_tbl</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/modeltime_accuracy.html">modeltime_accuracy</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/table_modeltime_accuracy.html">table_modeltime_accuracy</a></span><span class="op">(</span>
        .interactive <span class="op">=</span> <span class="va">interactive</span>
    <span class="op">)</span></code></pre></div>
<div id="vdidnyxgry" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#vdidnyxgry .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vdidnyxgry .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vdidnyxgry .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vdidnyxgry .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vdidnyxgry .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vdidnyxgry .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vdidnyxgry .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vdidnyxgry .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vdidnyxgry .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vdidnyxgry .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vdidnyxgry .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vdidnyxgry .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#vdidnyxgry .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vdidnyxgry .gt_from_md > :first-child {
  margin-top: 0;
}

#vdidnyxgry .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vdidnyxgry .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vdidnyxgry .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#vdidnyxgry .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vdidnyxgry .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#vdidnyxgry .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vdidnyxgry .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vdidnyxgry .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vdidnyxgry .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vdidnyxgry .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vdidnyxgry .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#vdidnyxgry .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vdidnyxgry .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#vdidnyxgry .gt_left {
  text-align: left;
}

#vdidnyxgry .gt_center {
  text-align: center;
}

#vdidnyxgry .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vdidnyxgry .gt_font_normal {
  font-weight: normal;
}

#vdidnyxgry .gt_font_bold {
  font-weight: bold;
}

#vdidnyxgry .gt_font_italic {
  font-style: italic;
}

#vdidnyxgry .gt_super {
  font-size: 65%;
}

#vdidnyxgry .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="table gt_table">
<thead class="gt_header"><tr>
<th colspan="9" class="gt_heading gt_title gt_font_normal gt_bottom_border" style>Accuracy Table</th>
    </tr></thead>
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">.model_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">.model_desc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">.type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mae</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mape</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">mase</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">smape</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rmse</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">rsq</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">ARIMA(1,0,1)(1,1,1)[12] WITH DRIFT W/ CATBOOST ERRORS</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">640.45</td>
<td class="gt_row gt_right">6.24</td>
<td class="gt_row gt_right">1.91</td>
<td class="gt_row gt_right">6.02</td>
<td class="gt_row gt_right">683.07</td>
<td class="gt_row gt_right">0.84</td>
</tr>
<tr>
<td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">PROPHET MODEL W/ CATBOOST ERROR SPECIFICATION</td>
<td class="gt_row gt_left">Test</td>
<td class="gt_row gt_right">271.50</td>
<td class="gt_row gt_right">2.74</td>
<td class="gt_row gt_right">0.81</td>
<td class="gt_row gt_right">2.67</td>
<td class="gt_row gt_right">364.09</td>
<td class="gt_row gt_right">0.81</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="step-6---refit-to-full-dataset-forecast-forward" class="section level3">
<h3 class="hasAnchor">
<a href="#step-6---refit-to-full-dataset-forecast-forward" class="anchor"></a>Step 6 - Refit to Full Dataset &amp; Forecast Forward</h3>
<p>The final step is to refit the models to the full dataset using <code><a href="https://rdrr.io/pkg/modeltime/man/modeltime_refit.html">modeltime_refit()</a></code> and forecast them forward.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">refit_tbl</span> <span class="op">&lt;-</span> <span class="va">calibration_tbl</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/modeltime_refit.html">modeltime_refit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">m750</span><span class="op">)</span>
<span class="va">refit_tbl</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/modeltime_forecast.html">modeltime_forecast</a></span><span class="op">(</span>h <span class="op">=</span> <span class="st">"3 years"</span>, actual_data <span class="op">=</span> <span class="va">m750</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/modeltime/man/plot_modeltime_forecast.html">plot_modeltime_forecast</a></span><span class="op">(</span>
      .legend_max_width <span class="op">=</span> <span class="fl">25</span>, <span class="co"># For mobile screens</span>
      .interactive      <span class="op">=</span> <span class="va">interactive</span>
    <span class="op">)</span></code></pre></div>
<p><img src="getting-started_files/figure-html/unnamed-chunk-12-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alberto Almuiña.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
